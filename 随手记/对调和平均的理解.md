# 🧮 调和平均（Harmonic Mean）详解

## ✅ 一、数学定义

对于 $n$ 个正数 $x_1, x_2, \ldots, x_n​$，  
调和平均定义为：
$$
H = \frac{n}{\sum_{i=1}^{n} \frac{1}{x_i}}​
$$
对于两个数 a 和 b：

$$
H = \frac{2ab}{a + b}
$$

---

## ✅ 二、与其他平均方式的比较

| 平均类型     | 定义                      | 特点       | 适用场景        |
| -------- | ----------------------- | -------- | ----------- |
| **算术平均** | $A = \frac{a + b}{2}$   | 强调**大值** | 普通平均，如成绩、温度 |
| **几何平均** | $G = \sqrt{ab}$         | 折中（乘法性质） | 比例、增长率、复利   |
| **调和平均** | $H = \frac{2ab}{a + b}$ | 强调**小值** | 速率、效率、平衡关系  |

三者关系：$H \le G \le A$

---

## ✅ 三、直观理解：调和平均“惩罚不平衡”

调和平均更接近较小的那个数，  
因此当两者差距大时，结果会显著偏低。

示例：$a = 0.9, \quad b = 0.1$
算术平均：$A = 0.5$
调和平均：$H = \frac{2 \times 0.9 \times 0.1}{0.9 + 0.1} = 0.18$
→ 差距越大，调和平均越低。 这说明它对“短板”非常敏感。

---

## ✅ 四、在 F1-Score 中的意义

F1 分数定义为精确率（Precision）与召回率（Recall）的调和平均：

$$
F1 = \frac{2 \times \text{Precision} \times \text{Recall}}{\text{Precision} + \text{Recall}}
$$

**意义：**

- 若精确率高但召回率低，或反之，F1 都会被显著拉低；
    
- 只有两者同时高，F1 才能高；
    
- 因此 F1-score 强调“全面、平衡”的性能表现。
    

> 🔹 **F1-score 对短板敏感，确保模型既“预测准”（高 Precision）又“预测全”（高 Recall）。**

---

## ✅ 五、物理类比：平均速度示例

调和平均常用于描述“效率类”量，例如速度、流量、电阻等。

若车辆以 60 km/h 去、40 km/h 回，同路程下的平均速度为：

$$
{\text{avg}} = \frac{2}{\frac{1}{60} + \frac{1}{40}} = 48~\text{km/h}
$$

不是简单的 50 km/h。  
→ 因为慢速阶段对总体耗时影响更大。

---

## ✅ 六、总结

> **调和平均是一种偏向较小值的平均方式，体现“整体表现受限于最弱环节”的特征。**  
> 在 F1-score 中，它确保模型在精确率与召回率上都表现良好，防止单一指标掩盖问题。