沙普利值（Shapley Value）来自博弈论，是一种 **公平分配合作收益的方法**。

- 在一个合作博弈里：
    
    - 有一群玩家 $N=\{1,2,\dots,n\}$。
        
    - 不同玩家组成的**子集（联盟）**$S \subseteq N$可以带来一定的收益$v(S)$。
        
    - 问题：整个收益 $v(N)$ 怎么在玩家之间分配才“公平”？
        

**Shapley 提出**：每个玩家的“合理贡献” = **在所有可能的加入顺序里，玩家的边际贡献的平均值**。


## 数学公式

对玩家 iii，沙普利值为：

$$
\phi_i(v) = \sum_{S \subseteq N \setminus \{i\}} \frac{|S|! \, (n - |S| - 1)!}{n!} \, [v(S \cup \{i\}) - v(S)]
$$

解释：

- 遍历所有不含$i$的子集 $S$。
    
- 计算当 iii 加入这个子集时的边际贡献：  $[v(S \cup \{i\}) - v(S)]$。
    
- 用组合学系数$\frac{|S|!(n-|S|-1)!}{n!}$做加权（表示该子集在所有可能加入顺序中的概率）。
    
- 把所有情况加总，就是玩家 i的 Shapley 值。
