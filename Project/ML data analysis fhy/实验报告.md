
# 问题分析
现有数据：
1. 风速、风向，温度、湿度等气象数据
2. 控制向量的参数， 一个向量，目前是十个元素，后续会增加。
3. 输出的矩阵（30 * 44）

输入x1（气象数据，主要是风速，风向）, x2（控制向量） 

输出y， 散布矩阵

# 模型设计

## 1. 先做风序列的“物理感知”特征
（无论用什么模型都受益）


## 2. 建模，端到端：**序列到热力图**
把 100 秒风速序列当作时序，液体参数当作条件，直接输出 $H\times W$ 热力图。
	
- **结构**（简化示意）
	1. **时序编码**：Transformer Encoder（或双向 LSTM）处理 `[T,2]` 得到全局向量 ztz_tzt​（加位置编码）
	2. **参数编码**：液体参数经 MLP 得到 zpz_pzp​
	3. **融合**：[zt;zp][z_t; z_p][zt​;zp​] 通过 MLP → 低维潜变量 zzz
		
	4. **解码到平面**：小型 **U‑Net** 或 转置卷积，把 zzz 先映射到一个低分辨率特征图，再上采样到 H×WH\times WH×W
		
- **输出与约束**
	
	- 激活：**Softplus** 保证非负
		
	- **质量归一化层**：M^=M/∑M×V\hat M = M/\sum M \times VM^=M/∑M×V（使总量等于液体体积或标定总质量）
		
- **损失**（可多任务混合）
	
	- **Poisson NLL** 或 **KL**（适合计数/密度）
		
	- **Sinkhorn/EMD（近似地球移动距离）**：鼓励形状与位置对齐
		
	- **总变差 (TV) 正则**：抑制噪声、鼓励平滑
		
	- **质量守恒罚项**：∣∑M^−V∣|\sum \hat M - V|∣∑M^−V∣
		
- **数据增强**：与风向一致地旋转 (X,Y)、尺度抖动、时序裁剪（如只用释放前/后窗口）