网格交易策略是一种基于价格波动的量化交易策略。其基本原理是将市场价格按照一定的间隔划分为多个价格层，并在这些价格层之间进行买卖操作。在价格较低的层次买入，在价格较高的层次卖出，从而在震荡市场中通过波动获利。

网格交易策略的核心思想是“低买高卖”，通过分段买卖来赚取市场波动中的差价。

网格交易策略首先设定价格区间的上限和下限。并根据该区间划分等距的网格（价格层）。当价格跌破某个网格时买入，当价格上涨超过某个网格时卖出。重复该过程，持续捕捉每个网格内的波动收益。

网格策略的核心在于不预测市场的具体趋势而是基于市场的波动性进行盈利。


## 1. 香农网格法

克劳德·香农（Claude Shannon）提出的经典投资策略，属于网格交易法的一种高级变体。

### 1.1 半仓动态平衡机制
香农网格要求初始资金按​**​50%持仓标的+50%现金​**​分配无论市场涨跌，始终保持股票市值与现金等值。例如，若初始投入10万元，则5万元买入标的（如ETF），剩余5万为现金。当标的上涨10%，市值升至5.5万时，需卖出2500元标的，使总资产中股票与现金各占50%（即5.25万+5.25万）。

### 1.2 凯利公式  数学模型 
凯利公式的经典版本为：  
$$
f^∗=\frac{bp−q}{b}​  
$$
其中：
- $f^*$：应投入资金占总资金的最佳比例；
- $p$：胜率（如投资盈利的概率）；
- $q$：败率 $（q=1−p）$；
- $b$：赔率（盈利与亏损的比值）

**核心思想：**
- 正期望值前提：仅当 $bp > q$(即期望收益为正)时适用。
- 复利最大化：通过动态调整仓位，避免因单次重仓亏损导致本金清零，同时捕捉长期增长机会。

**香农网格的底层逻辑与凯利公式一致：**
- ​**​仓位计算​**​：在价格上下波动各50%概率的假设下，凯利公式计算出最佳仓位比例为$f^∗ = 50\%$（因 $b=1$ , $p=q=0.5$ )。
- ​**​复利效应​**​：通过反复平衡操作，标的涨跌的几何平均收益为0，但实际总资产因低买高卖实现复利增长（如每次波动可赚取5%-10%差价）。
### 1.3 无限资金的模式特性
由于采用等比网格（而非等差），每次下跌补仓的资金需求呈指数级减少。例如，若标的价格持续下跌，每次补仓金额仅为剩余现金的一半，理论上可实现“无限补仓”，避免传统网格因资金耗尽而破网。
- 标的选择：长期存在、波动适中、无退市风险。
- 网格参数：建议3%-8%， 根据标的的波动率调整。
- 适用场景：震荡行情
- 优化策略：
	- 在估值低位开网
	- 根据市场波动率扩大或缩窄步长。
	- 引入均线或者MACD指标，在单边趋势中暂停网络。
	- 
